from PyQt5.QtWidgets import QMainWindow, QApplication, QPushButton, QComboBox, QLabel
import sys
import folium
import io
from PyQt5.QtCore import QRect
from PyQt5 import QtCore, QtGui, QtWidgets, QtWebEngineWidgets


class Window(QMainWindow):
    def __init__(self):
        super().__init__()

        # Set PyQt window size
        self.title = "MAP PROJECT"
        self.left = 200
        self.top = 100
        self.width = 1500
        self.height = 800
        self.iconName = "SIT.png"

        self.initWindow()

    def initWindow(self):
        # set window title
        self.setWindowTitle(self.title)
        # set icon
        self.setWindowIcon((QtGui.QIcon(self.iconName)))
        # set window geometry
        # self.setGeometry(self.left, self.top, self.width, self.height)
        # Disable PyQt 5 application from resizing
        self.setFixedSize(self.width, self.height)

        self.guiSettings()

        self.show()

    def guiSettings(self):
        # Create button
        shortPathButton = QtWidgets.QPushButton(self.tr("Find shortest path"))
        button2 = QtWidgets.QPushButton(self.tr("Another path"))
        button3 = QtWidgets.QPushButton(self.tr("Another path"))
        shortPathButton.setFixedSize(150, 50)
        button2.setFixedSize(150, 50)
        button3.setFixedSize(150, 50)


        # Create drop drown List (source)
        sourceLabel = QtWidgets.QLabel()
        sourceLabel.setText("Please select the Source location")
        sourceLabel.setFixedSize(200, 30)

        sourceDDL = QtWidgets.QComboBox()
        sourceDDL.addItem("Python")
        sourceDDL.addItem("Java")
        sourceDDL.addItem("C++")
        sourceDDL.addItem("C#")
        sourceDDL.setFixedSize(150, 50)

        # Create drop down list (destination)
        destinationLabel = QtWidgets.QLabel()
        destinationLabel.setText("Please select the Destination location")
        destinationLabel.setFixedSize(200, 30)

        destinationDDL = QtWidgets.QComboBox()
        destinationDDL.addItem("Python")
        destinationDDL.addItem("Java")
        destinationDDL.addItem("C++")
        destinationDDL.addItem("C#")
        destinationDDL.setFixedSize(150, 50)

        self.view = QtWebEngineWidgets.QWebEngineView()
        # set margin for the map
        self.view.setContentsMargins(50, 50, 50, 50)

        central_widget = QtWidgets.QWidget()
        self.setCentralWidget(central_widget)
        lay = QtWidgets.QHBoxLayout(central_widget)

        control_container = QtWidgets.QWidget()
        vlay = QtWidgets.QVBoxLayout(control_container)
        vlay.setSpacing(20)
        vlay.addStretch()
        vlay.addWidget(sourceLabel)
        vlay.addWidget(sourceDDL)
        vlay.addWidget(destinationLabel)
        vlay.addWidget(destinationDDL)
        vlay.addWidget(shortPathButton)
        vlay.addWidget(button2)
        vlay.addWidget(button3)
        vlay.addStretch()

        lay.addWidget(control_container)
        lay.addWidget(self.view, stretch=1)

        m = folium.Map(location=[1.3984, 103.9072], titles="Punggol", zoom_start=17)

        data = io.BytesIO()
        m.save(data, close_file=False)
        self.view.setHtml(data.getvalue().decode())


if __name__ == "__main__":
    App = QtWidgets.QApplication(sys.argv)
    window = Window()
    sys.exit(App.exec())
